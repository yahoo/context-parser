language: node_js
node_js:
- '0.12'
- '0.11'
- '0.10'
notifications:
  email:
    recipients:
    - neraliu@yahoo-inc.com
  on_success: change
  on_failure: always
after_success:
- test $(cat $TRAVIS_BUILD_DIR/package.json | grep version | awk '{print $2}' | sed
  's/"//g' | sed 's/,//g' | awk '{print "v"$1}' ) = $TRAVIS_TAG && export VALID_VERSION=true
deploy:
  provider: npm
  email: neraliu@yahoo-inc.com
  api_key:
    secure: Nc5KnaXOGwwaBbM2CqlEs74HjN7W9HTM3zmALFFs57ylZptA01sL3zrpgqTee1T2IIx5bvkanwvdqfHeGdX8aaMOc3hgLg6HUxzH8qiFG9uWnY8uhZMxPExeQdwXeB+iTXR8Yoq9tOmWx/DTIPY8nZRKzMinGjtkKNf6r2gYyww=
  on:
    condition: $VALID_VERSION = true
    tags: true
    branch: master
